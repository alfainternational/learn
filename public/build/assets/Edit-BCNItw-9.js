import{s as v,r as y,D as g,o as w,A as r,m as k,c as u,e as s,B as $,k as d,v as p,t as h,i as B,d as m}from"./app-E0SyKMCT.js";const V={class:"max-w-2xl mx-auto"},_={class:"flex items-center justify-between mb-8"},j={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},D={class:"pt-4 border-t flex justify-between items-center"},M=["disabled"],U={key:1,class:"py-12 flex justify-center"},P={__name:"Edit",setup(C){const x=v(),i=k(),l=x.params.id,b=y(!0),o=y(!1),e=g({title:"",business_name:"",industry:""});w(async()=>{try{const t=(await r.get(`/plans/${l}`)).data.data;e.title=t.title,e.business_name=t.business_name,e.industry=t.industry}catch(n){console.error(n),i.push("/plans")}finally{b.value=!1}});const c=async()=>{o.value=!0;try{await r.put(`/plans/${l}`,e),alert("تم التحديث بنجاح"),i.push(`/plans/${l}`)}catch{alert("حدث خطأ أثناء التحديث")}finally{o.value=!1}},f=async()=>{if(confirm("هل أنت متأكد من أرشفة هذه الخطة؟"))try{await r.post(`/plans/${l}/archive`),i.push("/plans")}catch{alert("حدث خطأ")}};return(n,t)=>(m(),u("div",V,[s("div",_,[t[4]||(t[4]=s("h2",{class:"text-2xl font-bold text-gray-900"},"إعدادات الخطة",-1)),s("button",{onClick:t[0]||(t[0]=a=>n.$router.push(`/plans/${$(l)}`)),class:"text-gray-500 hover:text-gray-700"},"عودة للخطة")]),b.value?(m(),u("div",U,[...t[9]||(t[9]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(m(),u("div",j,[s("form",{onSubmit:B(c,["prevent"]),class:"space-y-6"},[s("div",null,[t[5]||(t[5]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"عنوان الخطة",-1)),d(s("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.title=a),type:"text",class:"input"},null,512),[[p,e.title]])]),s("div",null,[t[6]||(t[6]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"اسم المشروع",-1)),d(s("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.business_name=a),type:"text",class:"input"},null,512),[[p,e.business_name]])]),s("div",null,[t[7]||(t[7]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"المجال",-1)),d(s("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.industry=a),type:"text",class:"input",disabled:""},null,512),[[p,e.industry]]),t[8]||(t[8]=s("p",{class:"text-xs text-gray-500 mt-1"},"لا يمكن تغيير المجال بعد إنشاء الخطة",-1))]),s("div",D,[s("button",{type:"button",onClick:f,class:"text-red-500 hover:text-red-700 text-sm font-medium"},"أرشفة الخطة"),s("button",{type:"submit",class:"btn btn-primary",disabled:o.value},h(o.value?"جاري الحفظ...":"حفظ التغييرات"),9,M)])],32)]))]))}};export{P as default};
