import{r as g,q as j,o as M,c as o,e,F as f,x,A as p,d as n,n as y,t as a,j as V,g as m}from"./app-E0SyKMCT.js";const z={class:"space-y-6"},B={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4"},D={class:"flex bg-gray-100 p-1 rounded-lg"},$=["onClick"],E={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},L={key:0,class:"p-12 flex justify-center"},A={key:1,class:"p-12 text-center text-gray-500"},H={key:2,class:"divide-y divide-gray-100"},N={class:"flex flex-col md:flex-row gap-6"},S={class:"w-full md:w-64 h-40 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 border border-gray-200"},F=["src"],T={key:1,class:"w-full h-full flex items-center justify-center text-gray-400"},q={class:"flex-1"},I={class:"flex items-start justify-between"},G={class:"flex items-center gap-2 mb-1"},J={class:"font-bold text-lg text-gray-900"},K={class:"text-gray-600 text-sm line-clamp-2"},O={class:"flex items-center gap-4 mt-4 text-sm text-gray-500"},P={class:"flex items-center gap-1"},Q={class:"flex items-center gap-1"},R={class:"flex items-center gap-1"},U={key:0,class:"mt-6 flex gap-3 justify-end border-t pt-4 border-gray-100"},W=["onClick"],X=["onClick"],ee={__name:"Index",setup(Y){const l=g([]),d=g(!0),i=g("pending"),h=[{id:"pending",name:"بانتظار المراجعة"},{id:"active",name:"نشطة"},{id:"all",name:"الكل"}],v=j(()=>i.value==="all"?l.value:i.value==="pending"?l.value.filter(r=>r.status==="pending_review"):i.value==="active"?l.value.filter(r=>r.status==="active"):l.value),c=async()=>{d.value=!0;try{const r=await p.get("/api/v1/admin/campaigns");r.data.success&&(l.value=r.data.data)}catch(r){console.error("Error fetching campaigns:",r)}finally{d.value=!1}},_=async r=>{if(confirm("هل أنت متأكد من قبول ونشر هذه الحملة؟"))try{await p.post(`/api/v1/admin/campaigns/${r.id}/approve`),c()}catch(s){console.error("Error approving campaign:",s)}},w=async r=>{const s=prompt("الرجاء إدخال سبب الرفض:");if(s!==null)try{await p.post(`/api/v1/admin/campaigns/${r.id}/reject`,{reason:s}),c()}catch(t){console.error("Error rejecting campaign:",t)}},b=r=>({pending_review:"bg-yellow-100 text-yellow-800",active:"bg-green-100 text-green-800",paused:"bg-gray-100 text-gray-800",rejected:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"})[r]||"bg-gray-100 text-gray-800",k=r=>({pending_review:"قيد المراجعة",active:"نشطة",paused:"متوقفة",rejected:"مرفوضة",completed:"مكتملة",draft:"مسودة"})[r]||r;return M(()=>{c()}),(r,s)=>(n(),o("div",z,[e("div",B,[s[0]||(s[0]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"إدارة الحملات الإعلانية"),e("p",{class:"text-sm text-gray-500 mt-1"},"مراجعة واعتماد إعلانات المعلنين")],-1)),e("div",D,[(n(),o(f,null,x(h,t=>e("button",{key:t.id,onClick:u=>i.value=t.id,class:y([i.value===t.id?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-900","px-4 py-2 text-sm font-medium rounded-md transition-all"])},a(t.name),11,$)),64))])]),e("div",E,[d.value?(n(),o("div",L,[...s[1]||(s[1]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-8 w-8 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):v.value.length===0?(n(),o("div",A,[...s[2]||(s[2]=[e("svg",{class:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})],-1),e("p",{class:"text-lg font-medium text-gray-900"},"لا توجد حملات إعلانية هنا",-1),e("p",{class:"text-sm mt-1"},"لا توجد حملات تطابق حالة الفلتر الحالي",-1)])])):(n(),o("div",H,[(n(!0),o(f,null,x(v.value,t=>{var u;return n(),o("div",{key:t.id,class:"p-6 hover:bg-gray-50 transition-colors"},[e("div",N,[e("div",S,[t.image_url?(n(),o("img",{key:0,src:t.image_url,class:"w-full h-full object-cover"},null,8,F)):(n(),o("div",T,[...s[3]||(s[3]=[e("span",{class:"text-xs"},"لا توجد صورة",-1)])]))]),e("div",q,[e("div",I,[e("div",null,[e("div",G,[e("h3",J,a(t.title||t.campaign_name),1),e("span",{class:y([b(t.status),"px-2 py-0.5 text-xs font-medium rounded-full"])},a(k(t.status)),3)]),e("p",K,a(t.description),1),e("div",O,[e("span",P,[s[4]||(s[4]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),m(" "+a(((u=t.advertiser)==null?void 0:u.name)||"مجهول"),1)]),e("span",Q,[s[5]||(s[5]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m(" "+a(t.budget_total)+" ر.س ",1)]),e("span",R,[s[6]||(s[6]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),m(" "+a(new Date(t.starts_at).toLocaleDateString())+" - "+a(new Date(t.ends_at).toLocaleDateString()),1)])])])]),t.status==="pending_review"?(n(),o("div",U,[e("button",{onClick:C=>w(t),class:"px-4 py-2 bg-white text-red-600 text-sm font-medium border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," رفض الحملة ",8,W),e("button",{onClick:C=>_(t),class:"px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 shadow-sm"}," قبول ونشر ",8,X)])):V("",!0)])])])}),128))]))])]))}};export{ee as default};
