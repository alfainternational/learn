import{r as i,o as V,A as p,c as b,e as t,h as E,j as S,k as c,I as G,g as K,t as d,n as w,v as y,d as _}from"./app-E0SyKMCT.js";const B={class:"space-y-6"},N={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},P={class:"space-y-4"},T={class:"flex gap-2"},U=["type"],j={key:0,class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},D={key:1,class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},z={class:"flex gap-3"},O=["disabled"],R=["disabled"],F={class:"text-sm font-medium"},Y={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},L=["disabled"],$={class:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-100"},q={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},J={class:"mr-2 font-medium text-gray-900"},Q={class:"mr-2 font-medium text-gray-900"},Z={__name:"Index",setup(W){const l=i(""),m=i(!1),v=i(!1),o=i(!1),n=i(null),r=i({ai_credits_free_tier:3,max_plans_free:1,subscription_basic_price_monthly:99,subscription_pro_price_monthly:299}),f=i(0),x=i(0),A=async()=>{var a,e,s,k,h;try{const g=await p.get("/admin/settings");if(g.data.success){const u=g.data.data;l.value=((a=u.gemini_api_key)==null?void 0:a.value)||"",r.value.ai_credits_free_tier=((e=u.ai_credits_free_tier)==null?void 0:e.value)||3,r.value.max_plans_free=((s=u.max_plans_free)==null?void 0:s.value)||1,r.value.subscription_basic_price_monthly=((k=u.subscription_basic_price_monthly)==null?void 0:k.value)||99,r.value.subscription_pro_price_monthly=((h=u.subscription_pro_price_monthly)==null?void 0:h.value)||299}}catch(g){console.error("Error fetching settings:",g)}},M=async()=>{var a,e;v.value=!0,n.value=null;try{const s=await p.post("/admin/settings/test-gemini",{api_key:l.value});n.value={success:!0,message:s.data.message}}catch(s){n.value={success:!1,message:((e=(a=s.response)==null?void 0:a.data)==null?void 0:e.message)||"فشل اختبار المفتاح"}}finally{v.value=!1}},I=async()=>{o.value=!0;try{await p.put("/admin/settings",{key:"gemini_api_key",value:l.value,description:"Gemini API Key for AI features"}),alert("تم حفظ مفتاح API بنجاح"),n.value=null}catch{alert("فشل حفظ المفتاح")}finally{o.value=!1}},C=async()=>{o.value=!0;try{const a=[{key:"ai_credits_free_tier",value:r.value.ai_credits_free_tier},{key:"max_plans_free",value:r.value.max_plans_free},{key:"subscription_basic_price_monthly",value:r.value.subscription_basic_price_monthly},{key:"subscription_pro_price_monthly",value:r.value.subscription_pro_price_monthly}];for(const e of a)await p.put("/admin/settings",e);alert("تم حفظ الإعدادات بنجاح")}catch{alert("فشل حفظ الإعدادات")}finally{o.value=!1}};return V(()=>{A(),p.get("/admin/dashboard").then(a=>{a.data.success&&(f.value=a.data.data.stats.total_users,x.value=a.data.data.stats.active_subscriptions)})}),(a,e)=>(_(),b("div",B,[e[20]||(e[20]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"إعدادات النظام"),t("p",{class:"text-sm text-gray-500 mt-1"},"إدارة إعدادات المنصة ومفاتيح API")],-1)),t("div",N,[e[10]||(e[10]=E('<div class="flex items-center gap-3 mb-6"><div class="p-3 bg-purple-50 text-purple-600 rounded-lg"><svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div><h2 class="text-lg font-bold text-gray-900">إعدادات الذكاء الاصطناعي</h2><p class="text-sm text-gray-500">مفتاح Gemini API</p></div></div>',1)),t("div",P,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," مفتاح Gemini API ",-1)),t("div",T,[c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value=s),type:m.value?"text":"password",placeholder:"أدخل مفتاح Gemini API",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,8,U),[[G,l.value]]),t("button",{onClick:e[1]||(e[1]=s=>m.value=!m.value),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},[m.value?(_(),b("svg",D,[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(_(),b("svg",j,[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500 mt-2"},[K(" احصل على مفتاح مجاني من "),t("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",class:"text-primary-600 hover:underline"},"Google AI Studio")],-1))]),t("div",z,[t("button",{onClick:M,disabled:!l.value||v.value,class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},d(v.value?"جاري الاختبار...":"اختبار المفتاح"),9,O),t("button",{onClick:I,disabled:!l.value||o.value,class:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},d(o.value?"جاري الحفظ...":"حفظ المفتاح"),9,R)]),n.value?(_(),b("div",{key:0,class:w([n.value.success?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200","p-4 rounded-lg border"])},[t("p",F,d(n.value.message),1)],2)):S("",!0)])]),t("div",Y,[e[15]||(e[15]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"إعدادات الاشتراكات",-1)),t("div",H,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," استخدامات AI المجانية (شهرياً) ",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.ai_credits_free_tier=s),type:"number",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,512),[[y,r.value.ai_credits_free_tier,void 0,{number:!0}]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," عدد الخطط للمستخدم المجاني ",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.value.max_plans_free=s),type:"number",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,512),[[y,r.value.max_plans_free,void 0,{number:!0}]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," سعر الاشتراك الأساسي (ريال/شهر) ",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.value.subscription_basic_price_monthly=s),type:"number",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,512),[[y,r.value.subscription_basic_price_monthly,void 0,{number:!0}]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," سعر الاشتراك الاحترافي (ريال/شهر) ",-1)),c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>r.value.subscription_pro_price_monthly=s),type:"number",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,512),[[y,r.value.subscription_pro_price_monthly,void 0,{number:!0}]])])]),t("button",{onClick:C,disabled:o.value,class:"mt-4 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 transition-colors"},d(o.value?"جاري الحفظ...":"حفظ الإعدادات"),9,L)]),t("div",$,[e[19]||(e[19]=t("h3",{class:"font-bold text-gray-900 mb-3"},"حالة النظام",-1)),t("div",q,[t("div",null,[e[16]||(e[16]=t("span",{class:"text-gray-600"},"وضع AI:",-1)),t("span",{class:w(["mr-2 font-medium",l.value&&l.value!=="DEMO_KEY_FOR_TESTING"?"text-green-600":"text-yellow-600"])},d(l.value&&l.value!=="DEMO_KEY_FOR_TESTING"?"مفعّل":"وضع تجريبي"),3)]),t("div",null,[e[17]||(e[17]=t("span",{class:"text-gray-600"},"إجمالي المستخدمين:",-1)),t("span",J,d(f.value),1)]),t("div",null,[e[18]||(e[18]=t("span",{class:"text-gray-600"},"الاشتراكات النشطة:",-1)),t("span",Q,d(x.value),1)])])])]))}};export{Z as default};
