import{c as r,d as o,e,u as C,r as d,q as N,o as S,A as v,s as $,f as c,w as f,b as V,t as i,j as u,F as A,x as M,y as F,B as m,m as P,g as p}from"./app-E0SyKMCT.js";import{r as R}from"./PlusIcon-B_lY5pBx.js";import{r as T}from"./CheckCircleIcon-DV89Zngo.js";function q(b,_){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}const D={key:0,class:"flex justify-center py-20"},E={key:1,class:"space-y-6"},H={class:"flex items-center justify-between"},L={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},U={class:"lg:col-span-2 space-y-6"},z={class:"card p-0 overflow-hidden bg-white"},G={class:"bg-gray-100 h-48 md:h-64 flex items-center justify-center relative"},I={class:"text-6xl"},J={class:"absolute bottom-6 right-6 text-3xl font-bold text-white shadow-sm"},K={class:"p-6"},O={class:"flex flex-wrap gap-2 mb-4"},Q={class:"px-2 py-1 bg-primary-50 text-primary-700 text-xs rounded-full"},W={key:0,class:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full"},X={class:"text-gray-600 leading-relaxed mb-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z={class:"space-y-6"},ee={class:"card p-6 bg-white sticky top-6"},te={key:0,class:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800"},se=["disabled"],ae={key:0},oe={key:1},re={key:2,class:"text-center py-20"},de={__name:"Show",setup(b){const _=$(),h=P(),w=C(),s=d(null),g=d(!0),n=d(!1),x=d(["diagnosis","target_audience","core_message","marketing_channels","content_plan"]),k=a=>({diagnosis:"التشخيص الأولي",target_audience:"الجمهور المستهدف",core_message:"الرسالة الأساسية",marketing_channels:"قنوات التسويق",content_plan:"خطة المحتوى",offer_stack:"العروض"})[a]||a,j=N(()=>{var a;return["pro","enterprise"].includes((a=w.user)==null?void 0:a.subscription_tier)});S(async()=>{try{const a=await v.get(`/templates/${_.params.id}`);s.value=a.data.data,s.value.template_data&&s.value.template_data.sections&&(x.value=s.value.template_data.sections)}catch(a){console.error(a)}finally{g.value=!1}});const B=async()=>{var a,t;n.value=!0;try{const l=await v.post(`/templates/${s.value.id}/use`);h.push(`/plans/${l.data.data.id}`)}catch(l){alert(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||"فشل استخدام القالب")}finally{n.value=!1}};return(a,t)=>{const l=V("router-link");return g.value?(o(),r("div",D,[...t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"},null,-1)])])):s.value?(o(),r("div",E,[e("div",H,[c(l,{to:"/templates",class:"flex items-center text-sm text-gray-500 hover:text-gray-900"},{default:f(()=>[c(m(q),{class:"w-4 h-4 ml-1"}),t[1]||(t[1]=p(" العودة للقوالب ",-1))]),_:1})]),e("div",L,[e("div",U,[e("div",z,[e("div",G,[e("span",I,i(s.value.name.charAt(0)),1),t[2]||(t[2]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"},null,-1)),e("h1",J,i(s.value.name),1)]),e("div",K,[e("div",O,[e("span",Q,i(s.value.industry||"عام"),1),s.value.is_premium?(o(),r("span",W,"Pro")):u("",!0)]),t[3]||(t[3]=e("h2",{class:"text-lg font-bold text-gray-900 mb-2"},"عن هذا القالب",-1)),e("p",X,i(s.value.description),1),t[4]||(t[4]=e("h2",{class:"text-lg font-bold text-gray-900 mb-2"},"الأقسام المتضمنة",-1)),e("div",Y,[(o(!0),r(A,null,M(x.value,y=>(o(),r("div",{key:y,class:"flex items-center text-sm text-gray-600"},[c(m(T),{class:"w-5 h-5 text-green-500 ml-2"}),p(" "+i(k(y)),1)]))),128))])])])]),e("div",Z,[e("div",ee,[t[5]||(t[5]=e("h3",{class:"font-bold text-gray-900 mb-4"},"استخدام هذا القالب",-1)),s.value.is_premium?(o(),r("div",te," هذا القالب متاح فقط لمشتركي الباقة الاحترافية. ")):u("",!0),e("button",{onClick:B,disabled:n.value||s.value.is_premium&&!j.value,class:"btn btn-primary w-full flex justify-center items-center gap-2 mb-3"},[n.value?(o(),r("span",ae,"جاري الإنشاء...")):(o(),r("span",oe,"إنشاء خطة من القالب")),n.value?u("",!0):(o(),F(m(R),{key:2,class:"w-5 h-5"}))],8,se),t[6]||(t[6]=e("p",{class:"text-xs text-center text-gray-500"}," سيتم إنشاء خطة جديدة مملوءة بالهيكل والمحتوى الافتراضي لهذا القالب. ",-1))])])])])):(o(),r("div",re,[t[8]||(t[8]=e("h3",{class:"text-xl font-bold text-gray-700"},"القالب غير موجود",-1)),c(l,{to:"/templates",class:"text-primary-600 mt-2 block"},{default:f(()=>[...t[7]||(t[7]=[p("العودة للمكتبة",-1)])]),_:1})]))}}};export{de as default};
