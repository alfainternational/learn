import{c as a,e as s,d as r,r as y,q as j,o as A,j as _,F as g,x,f as p,B as b,A as h,n as d,t as v}from"./app-E0SyKMCT.js";function f(k,l){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}const B={class:"space-y-6"},D={class:"flex items-center justify-between"},L={key:0,class:"space-y-4"},M={key:1,class:"space-y-4"},N=["onClick"],V={class:"flex items-start gap-4"},I={class:"flex-1"},$={class:"text-gray-600 text-sm mt-1"},E={class:"text-xs text-gray-400 mt-2"},F={key:0,class:"w-3 h-3 bg-red-500 rounded-full"},H={key:2,class:"text-center py-12"},O={class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},R={key:3,class:"flex justify-center mt-6"},T={class:"flex gap-2"},q=["disabled","onClick","innerHTML"],G={__name:"Index",setup(k){const l=y([]),c=y(!0),i=y([]),w=j(()=>l.value.some(o=>!o.read_at)),m=async(o="/notifications")=>{c.value=!0;try{const t=await h.get(o);l.value=t.data.data||t.data,i.value=t.data.links||[]}catch(t){console.error(t)}finally{c.value=!1}},C=async o=>{if(!o.read_at)try{await h.post(`/notifications/${o.id}/read`),o.read_at=new Date().toISOString()}catch(t){console.error(t)}},S=async()=>{try{await h.post("/notifications/read-all"),l.value.forEach(o=>o.read_at=new Date().toISOString())}catch(o){console.error(o)}};return A(()=>{m()}),(o,t)=>(r(),a("div",B,[s("div",D,[t[0]||(t[0]=s("h1",{class:"text-2xl font-bold text-gray-900"},"الإشعارات",-1)),w.value?(r(),a("button",{key:0,onClick:S,class:"text-sm text-primary-600 hover:text-primary-700"}," تحديد الكل كمقروء ")):_("",!0)]),c.value?(r(),a("div",L,[(r(),a(g,null,x(3,e=>s("div",{key:e,class:"h-20 bg-gray-100 rounded-lg animate-pulse"})),64))])):l.value.length>0?(r(),a("div",M,[(r(!0),a(g,null,x(l.value,e=>{var n,u;return r(),a("div",{key:e.id,class:d(["card p-4 bg-white hover:bg-gray-50 transition-colors cursor-pointer",{"border-l-4 border-l-primary-500":!e.read_at}]),onClick:z=>C(e)},[s("div",V,[s("div",{class:d(["p-2 rounded-full",e.type==="success"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"])},[p(b(f),{class:"w-6 h-6"})],2),s("div",I,[s("h3",{class:d(["font-bold text-gray-900",{"text-primary-700":!e.read_at}])},v(((n=e.data)==null?void 0:n.title)||"إشعار جديد"),3),s("p",$,v(((u=e.data)==null?void 0:u.message)||"..."),1),s("p",E,v(new Date(e.created_at).toLocaleString("ar-SA")),1)]),e.read_at?_("",!0):(r(),a("div",F))])],10,N)}),128))])):(r(),a("div",H,[s("div",O,[p(b(f),{class:"w-8 h-8 text-gray-400"})]),t[1]||(t[1]=s("h3",{class:"text-lg font-medium text-gray-900"},"لا توجد إشعارات",-1)),t[2]||(t[2]=s("p",{class:"text-gray-500"},"سوف نبلغك عند وجود أي تحديثات جديدة.",-1))])),i.value.length>3?(r(),a("div",R,[s("nav",T,[(r(!0),a(g,null,x(i.value,(e,n)=>(r(),a("button",{key:n,disabled:!e.url||e.active,onClick:u=>m(e.url),class:d(["px-3 py-1 rounded border",e.active?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"]),innerHTML:e.label},null,10,q))),128))])])):_("",!0)]))}};export{G as default};
